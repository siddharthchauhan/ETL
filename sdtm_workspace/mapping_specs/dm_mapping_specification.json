{
  "metadata": {
    "study_id": "MAXIS-08",
    "source_domain": "DEMO.csv",
    "target_domain": "DM",
    "sdtm_version": "SDTM-IG 3.4",
    "created_by": "SDTM Mapping Generator",
    "created_date": "2026-02-02T09:32:16.243608",
    "description": "Mapping specification for DM domain transformation"
  },
  "source_files": [
    {
      "filename": "DEMO.csv",
      "records": 16,
      "columns": 12
    }
  ],
  "variable_mappings": [
    {
      "sdtm_variable": "STUDYID",
      "label": "Study Identifier",
      "type": "Char",
      "core": "Req",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Study identifier - maps from STUDY source column (MAXIS-08)"
    },
    {
      "sdtm_variable": "DOMAIN",
      "label": "Domain Abbreviation",
      "type": "Char",
      "core": "Req",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Domain abbreviation - constant value for Demographics domain"
    },
    {
      "sdtm_variable": "USUBJID",
      "label": "Unique Subject Identifier",
      "type": "Char",
      "core": "Req",
      "source_column": "PT",
      "transformation": "Parse PT to extract SITEID and SUBJID, concatenate with STUDYID",
      "transformation_type": "CONCAT",
      "controlled_terminology": null,
      "comments": "Unique subject identifier derived by concatenating STUDYID-SITEID-SUBJID. PT contains SITEID-SUBJID (e.g., 01-01)"
    },
    {
      "sdtm_variable": "SUBJID",
      "label": "Subject Identifier for the Study",
      "type": "Char",
      "core": "Req",
      "source_column": "PT",
      "transformation": "Extract subject portion from PT after hyphen",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Subject identifier extracted from PT column (format: SITEID-SUBJID)"
    },
    {
      "sdtm_variable": "SITEID",
      "label": "Study Site Identifier",
      "type": "Char",
      "core": "Exp",
      "source_column": "PT",
      "transformation": "Extract site portion from PT before hyphen",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Site identifier extracted from PT column (format: SITEID-SUBJID)"
    },
    {
      "sdtm_variable": "RFSTDTC",
      "label": "Subject Reference Start Date/Time",
      "type": "Char",
      "core": "Req",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DATE_FORMAT",
      "controlled_terminology": null,
      "comments": "Subject reference start date - typically first exposure or study visit date. Not available in DM source, needs derivation from other domains"
    },
    {
      "sdtm_variable": "RFENDTC",
      "label": "Subject Reference End Date/Time",
      "type": "Char",
      "core": "Req",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DATE_FORMAT",
      "controlled_terminology": null,
      "comments": "Subject reference end date - typically last exposure, disposition, or study visit date. Not available in DM source"
    },
    {
      "sdtm_variable": "RFXSTDTC",
      "label": "Date/Time of First Study Treatment",
      "type": "Char",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Date/Time of first study treatment - must be derived from Exposure (EX) domain"
    },
    {
      "sdtm_variable": "RFXENDTC",
      "label": "Date/Time of Last Study Treatment",
      "type": "Char",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Date/Time of last study treatment - must be derived from Exposure (EX) domain"
    },
    {
      "sdtm_variable": "RFICDTC",
      "label": "Date/Time of Informed Consent",
      "type": "Char",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DATE_FORMAT",
      "controlled_terminology": null,
      "comments": "Date/Time of informed consent - not available in current source data"
    },
    {
      "sdtm_variable": "RFPENDTC",
      "label": "Date/Time of End of Participation",
      "type": "Char",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DATE_FORMAT",
      "controlled_terminology": null,
      "comments": "Date/Time of end of participation - typically from disposition or last contact"
    },
    {
      "sdtm_variable": "DTHDTC",
      "label": "Date/Time of Death",
      "type": "Char",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Date/Time of death - only populate if subject died, derive from Disposition domain"
    },
    {
      "sdtm_variable": "DTHFL",
      "label": "Subject Death Flag",
      "type": "Char",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": "NY",
      "comments": "Subject death flag - set to Y only if subject died"
    },
    {
      "sdtm_variable": "BRTHDTC",
      "label": "Date/Time of Birth",
      "type": "Char",
      "core": "Exp",
      "source_column": "DOB",
      "transformation": "Convert YYYYMMDD integer to ISO 8601 date format YYYY-MM-DD",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Date of birth - convert from integer format (YYYYMMDD) to ISO 8601 format"
    },
    {
      "sdtm_variable": "AGE",
      "label": "Age",
      "type": "Char",
      "core": "Exp",
      "source_column": "DOB",
      "transformation": "Calculate age based on DOB and reference start date",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Age in years - calculated from date of birth and reference start date. Requires RFSTDTC to be derived first"
    },
    {
      "sdtm_variable": "AGEU",
      "label": "Age Units",
      "type": "Char",
      "core": "Exp",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": "AGEU",
      "comments": "Age units - set to YEARS per CDISC controlled terminology"
    },
    {
      "sdtm_variable": "SEX",
      "label": "Sex",
      "type": "Char",
      "core": "Exp",
      "source_column": "GENDER",
      "transformation": "Map M/F values to SEX codelist (M=M, F=F)",
      "transformation_type": "MAP",
      "controlled_terminology": "SEX",
      "comments": "Sex - direct mapping from GENDER column which contains M/F values conforming to CDISC CT"
    },
    {
      "sdtm_variable": "RACE",
      "label": "Race",
      "type": "Char",
      "core": "Exp",
      "source_column": "RCE",
      "transformation": "Map source race values to CDISC CT RACE codelist",
      "transformation_type": "MAP",
      "controlled_terminology": "RACE",
      "comments": "Race - requires mapping from source values to CDISC controlled terminology. Note: HISPANIC is typically an ethnicity not race, may need to populate ETHNIC instead"
    },
    {
      "sdtm_variable": "ETHNIC",
      "label": "Ethnicity",
      "type": "Char",
      "core": "Exp",
      "source_column": "RCE",
      "transformation": "Map source RCE values to CDISC CT ETHNIC codelist",
      "transformation_type": "MAP",
      "controlled_terminology": "ETHNIC",
      "comments": "Ethnicity - extract HISPANIC values from RCE to populate ethnicity per CDISC standards"
    },
    {
      "sdtm_variable": "ARMCD",
      "label": "Planned Arm Code",
      "type": "Num",
      "core": "Exp",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Planned arm code - not available in demographics source, must be derived from randomization/treatment assignment data"
    },
    {
      "sdtm_variable": "ARM",
      "label": "Description of Planned Arm",
      "type": "Char",
      "core": "Exp",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Description of planned arm - not available in demographics source"
    },
    {
      "sdtm_variable": "ACTARMCD",
      "label": "Actual Arm Code",
      "type": "Num",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Actual arm code - the treatment arm subject actually received, may differ from planned"
    },
    {
      "sdtm_variable": "ACTARM",
      "label": "Description of Actual Arm",
      "type": "Char",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Description of actual arm - not available in demographics source"
    },
    {
      "sdtm_variable": "COUNTRY",
      "label": "Country",
      "type": "Char",
      "core": "Exp",
      "source_column": "INVSITE",
      "transformation": "Extract country code from INVSITE or map site to country using site reference data",
      "transformation_type": "DERIVE",
      "controlled_terminology": "ISO 3166",
      "comments": "Country - derive from INVSITE using site reference data. Must use ISO 3166 three-character country codes"
    },
    {
      "sdtm_variable": "INVID",
      "label": "Investigator Identifier",
      "type": "Char",
      "core": "Perm",
      "source_column": "INVSITE",
      "transformation": "Extract investigator ID from INVSITE or use site-to-investigator mapping",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Investigator identifier - can be derived from INVSITE using reference data"
    },
    {
      "sdtm_variable": "INVNAM",
      "label": "Investigator Name",
      "type": "Char",
      "core": "Perm",
      "source_column": "INVSITE",
      "transformation": "Lookup investigator name from site reference data",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Investigator name - lookup from site reference data using INVSITE"
    },
    {
      "sdtm_variable": "DMSEQ",
      "label": "DMSEQ",
      "type": "Num",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Sequence number - set to 1 for DM domain as there is one record per subject"
    },
    {
      "sdtm_variable": "DMDTC",
      "label": "Date/Time of Collection",
      "type": "Char",
      "core": "Perm",
      "source_column": "DOB",
      "transformation": "Use data collection date if available, otherwise use CPEVENT/VISIT date",
      "transformation_type": "DATE_FORMAT",
      "controlled_terminology": null,
      "comments": "Date/Time of collection - should be the date demographics were collected, typically from visit data"
    },
    {
      "sdtm_variable": "DMDY",
      "label": "Study Day of Collection",
      "type": "Num",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Study day of collection - calculated relative to RFSTDTC per SDTM rules"
    }
  ],
  "derivation_rules": {
    "USUBJID": "STUDYID || '-' || SITEID || '-' || SUBJID",
    "AGE": "floor((RFSTDTC - BRTHDTC) / 365.25)",
    "DOMAIN": "'DM'",
    "AGEU": "'YEARS'",
    "STUDYID": "Use value from STUDY column",
    "SUBJID": "Extract characters after '-' from PT column (e.g., '01' from '01-01')",
    "SITEID": "Extract characters before '-' from PT column (e.g., '01' from '01-01')",
    "RFSTDTC": "Derive from EX domain (first exposure date) or SV domain (first visit date)",
    "RFENDTC": "Derive from EX domain (last exposure date) or DS domain (disposition date) or SV domain (last visit date)",
    "RFXSTDTC": "Derive from EX domain - minimum EXSTDTC across all exposures for subject",
    "RFXENDTC": "Derive from EX domain - maximum EXENDTC across all exposures for subject",
    "RFICDTC": "Derive from informed consent form date if available in source system",
    "RFPENDTC": "Derive from DS domain or last contact date",
    "DTHDTC": "Derive from DS domain where DSDECOD='DEATH' or from death supplemental data",
    "DTHFL": "Set to 'Y' if DTHDTC is not null, otherwise null",
    "BRTHDTC": "Parse DOB integer (e.g., 19740918) to '1974-09-18' format",
    "RACE": "Map: BLACK='BLACK OR AFRICAN AMERICAN', ASIAN='ASIAN', HISPANIC='OTHER' or evaluate if ETHNIC should be populated instead",
    "ETHNIC": "Map: HISPANIC='HISPANIC OR LATINO', others='NOT HISPANIC OR LATINO' or null",
    "ARMCD": "Derive from randomization data or treatment assignment",
    "ARM": "Derive from randomization data or treatment assignment - full description corresponding to ARMCD",
    "ACTARMCD": "Derive from actual treatment received in EX domain or deviation data",
    "ACTARM": "Derive from actual treatment received - full description corresponding to ACTARMCD",
    "COUNTRY": "Parse INVSITE (C008_408) to extract country code or use site-to-country mapping table",
    "INVID": "Parse INVSITE or lookup investigator ID from site reference data",
    "INVNAM": "Use INVSITE to lookup investigator name from site/investigator reference table",
    "DMSEQ": "Assign sequence number - typically 1 since DM has one record per subject",
    "DMDTC": "Use visit date from SV domain for BASELINE visit, convert to ISO 8601",
    "DMDY": "Calculate study day: (DMDTC - RFSTDTC) + 1 if DMDTC >= RFSTDTC, otherwise (DMDTC - RFSTDTC)"
  },
  "controlled_terminologies": {
    "SEX": [
      "M",
      "F",
      "U",
      "UNDIFFERENTIATED"
    ],
    "RACE": [
      "AMERICAN INDIAN OR ALASKA NATIVE",
      "ASIAN",
      "BLACK OR AFRICAN AMERICAN",
      "NATIVE HAWAIIAN OR OTHER PACIFIC ISLANDER",
      "WHITE",
      "MULTIPLE",
      "NOT REPORTED",
      "UNKNOWN",
      "OTHER"
    ],
    "ETHNIC": [
      "HISPANIC OR LATINO",
      "NOT HISPANIC OR LATINO",
      "NOT REPORTED",
      "UNKNOWN"
    ],
    "AGEU": [
      "YEARS",
      "MONTHS",
      "WEEKS",
      "DAYS",
      "HOURS"
    ]
  },
  "data_quality_rules": []
}