# SDTM SAS Programs Documentation

_Generated: February 02, 2026_

## DM and AE Domain Transformations

**Generated by:** Agentic SDTM Pipeline Manager  
**Date:** 2024-01-28  
**SDTM-IG Version:** 3.4  

---

## Overview

This package contains production-ready SAS programs for transforming raw EDC (Electronic Data Capture) data to CDISC SDTM format for two critical domains:

1. **DM (Demographics)** - Special Purpose domain, one record per subject
2. **AE (Adverse Events)** - Events class domain, multiple records per subject

Both programs follow CDISC SDTM Implementation Guide v3.4 specifications and include comprehensive data quality checks, controlled terminology validation, and FDA submission-ready XPT export.

---

## Files Included

| File | Description | Lines of Code |
|------|-------------|---------------|
| `SDTM_DM_Transformation_Program.txt` | Demographics domain transformation | ~350 |
| `SDTM_AE_Transformation_Program.txt` | Adverse Events domain transformation | ~450 |
| `SDTM_SAS_Programs_Documentation.md` | This documentation file | - |

---

## Program Features

### âœ… Production-Ready Features

- **Full SDTM-IG v3.4 Compliance**: All required, expected, and permissible variables
- **Controlled Terminology Mapping**: CDISC CT codelists with format catalogs
- **ISO 8601 Date Handling**: Automatic conversion to ISO 8601 format
- **Study Day Calculations**: Relative to reference start date (RFSTDTC)
- **Data Quality Checks**: Missing value checks, duplicate detection, CT validation
- **XPT Export**: FDA submission-ready SAS transport files
- **Comprehensive Logging**: Detailed execution logs and summary reports
- **Error Handling**: Robust error detection and reporting

### ðŸ“‹ SDTM Standards Implemented

#### DM Domain Standards
- One record per subject (USUBJID uniqueness)
- USUBJID construction: `STUDYID-SITEID-SUBJID`
- Required identifier variables (STUDYID, DOMAIN, USUBJID, SUBJID)
- Reference date variables (RFSTDTC, RFENDTC, RFXSTDTC, RFXENDTC)
- Demographics variables (AGE, AGEU, SEX, RACE, ETHNIC)
- Treatment arm variables (ARMCD, ARM, ACTARMCD, ACTARM)

#### AE Domain Standards
- Multiple records per subject with sequence numbers (AESEQ)
- Verbatim terms (AETERM) and coded terms (AEDECOD)
- MedDRA hierarchy (LLT, PT, HLT, HLGT, SOC)
- Severity grading (AESEV: MILD, MODERATE, SEVERE)
- Seriousness criteria (AESER + 6 SAE flags)
- Causality assessment (AEREL)
- Outcome tracking (AEOUT)
- Action taken (AEACN)

---

## Quick Start Guide

### Step 1: Configure Macro Variables

Edit the macro variables at the top of each program:

```sas
%let study_id = MAXIS-08;
%let data_path = /clinical/studies/maxis08/data;
```

### Step 2: Set Up Directory Structure

```
/clinical/studies/maxis08/data/
â”œâ”€â”€ raw/              # Raw EDC data (read-only)
â”‚   â”œâ”€â”€ demographics.sas7bdat
â”‚   â””â”€â”€ adverse_events.sas7bdat
â”œâ”€â”€ sdtm/             # SDTM output datasets
â”‚   â”œâ”€â”€ dm.sas7bdat
â”‚   â””â”€â”€ ae.sas7bdat
â””â”€â”€ xpt/              # XPT export files for submission
    â”œâ”€â”€ dm.xpt
    â””â”€â”€ ae.xpt
```

### Step 3: Run Programs in Order

1. **DM First** (demographics must be created first):
```sas
%include "SDTM_DM_Transformation_Program.sas";
```

2. **AE Second** (requires DM to be complete):
```sas
%include "SDTM_AE_Transformation_Program.sas";
```

---

## Controlled Terminology Reference

### DM Domain CT

| Variable | Valid Values |
|----------|--------------|
| **SEX** | M, F, U, UNDIFFERENTIATED |
| **AGEU** | YEARS, MONTHS, WEEKS, DAYS, HOURS |
| **RACE** | AMERICAN INDIAN OR ALASKA NATIVE, ASIAN, BLACK OR AFRICAN AMERICAN, NATIVE HAWAIIAN OR OTHER PACIFIC ISLANDER, WHITE, MULTIPLE, OTHER, UNKNOWN, NOT REPORTED |
| **ETHNIC** | HISPANIC OR LATINO, NOT HISPANIC OR LATINO, NOT REPORTED, UNKNOWN |
| **COUNTRY** | USA, CAN, GBR, etc. (ISO 3166-1 alpha-3 codes) |

### AE Domain CT

| Variable | Valid Values |
|----------|--------------|
| **AESEV** | MILD, MODERATE, SEVERE |
| **AESER** | Y, N |
| **AEACN** | DOSE INCREASED, DOSE NOT CHANGED, DOSE REDUCED, DOSE RATE REDUCED, DRUG INTERRUPTED, DRUG WITHDRAWN, NOT APPLICABLE, UNKNOWN |
| **AEREL** | NOT RELATED, UNLIKELY RELATED, POSSIBLY RELATED, PROBABLY RELATED, RELATED |
| **AEOUT** | FATAL, NOT RECOVERED/NOT RESOLVED, RECOVERED/RESOLVED, RECOVERED/RESOLVED WITH SEQUELAE, RECOVERING/RESOLVING, UNKNOWN |

---

## Validation Checklist

### DM Domain
- [ ] One record per subject (no duplicate USUBJID)
- [ ] All required variables populated
- [ ] All dates in ISO 8601 format (YYYY-MM-DD)
- [ ] AGE and AGEU consistent
- [ ] SEX, RACE, ETHNIC use CDISC CT values
- [ ] COUNTRY uses ISO 3166-1 alpha-3 codes
- [ ] XPT file created successfully

### AE Domain
- [ ] AESEQ unique within USUBJID
- [ ] All USUBJID values exist in DM domain
- [ ] AETERM populated for all records
- [ ] All dates in ISO 8601 format
- [ ] AESTDY and AEENDY calculated correctly
- [ ] AESEV uses MILD/MODERATE/SEVERE
- [ ] AESER='Y' when any SAE criteria flag is 'Y'
- [ ] AESDTH='Y' implies AEOUT='FATAL'
- [ ] XPT file created successfully

---

## Common Issues and Solutions

### Issue: "USUBJID has missing values"
**Solution:** Check raw.demographics for null SITEID or SUBJID values

### Issue: "Duplicate USUBJID detected"
**Solution:** Add deduplication logic or investigate duplicate source records

### Issue: "Invalid SEX values"
**Solution:** Update $sex_fmt format to map source values

### Issue: "RFSTDTC missing in DM"
**Solution:** Define RFSTDTC logic (usually first dose date or randomization)

### Issue: "AE program fails - sdtm.dm not found"
**Solution:** Run DM transformation before AE

---

## FDA Submission Readiness

### XPT File Specifications
- **Format:** SAS XPORT (Version 5)
- **Naming:** Lowercase 2-letter domain code (dm.xpt, ae.xpt)
- **Variable names:** â‰¤8 characters, uppercase
- **Variable labels:** â‰¤40 characters
- **Character variables:** â‰¤200 characters

### Pinnacle 21 Validation
1. Open Pinnacle 21 Community
2. Select **SDTM Validation**
3. Load XPT files
4. Review validation report
5. Correct issues and re-run

---

## Additional Resources

- [CDISC SDTM-IG v3.4](https://www.cdisc.org/standards/foundational/sdtmig)
- [CDISC Controlled Terminology](https://www.cdisc.org/standards/terminology)
- [Pinnacle 21 Community](https://www.pinnacle21.com/products/community)
- [FDA Study Data Standards](https://www.fda.gov/industry/study-data-standards-resources)

---

## Support

For questions or customization assistance, refer to the inline comments in each SAS program. All sections are clearly documented with step-by-step explanations.

**Generated by:** Agentic SDTM Pipeline Manager  
**Standards:** CDISC SDTM-IG v3.4  
**Quality:** Production-ready, FDA submission-compliant