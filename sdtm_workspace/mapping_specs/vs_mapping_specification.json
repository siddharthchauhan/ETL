{
  "metadata": {
    "study_id": "MAXIS-08",
    "source_domain": "VITALS.csv",
    "target_domain": "VS",
    "sdtm_version": "SDTM-IG 3.4",
    "created_by": "SDTM Mapping Generator",
    "created_date": "2026-02-02T09:39:47.499216",
    "description": "Mapping specification for VS domain transformation"
  },
  "source_files": [
    {
      "filename": "VITALS.csv",
      "records": 536,
      "columns": 21
    }
  ],
  "variable_mappings": [
    {
      "sdtm_variable": "STUDYID",
      "label": "Study Identifier",
      "type": "Char",
      "core": "Req",
      "source_column": "STUDY",
      "transformation": "Direct mapping",
      "transformation_type": "COPY",
      "controlled_terminology": null,
      "comments": "Study identifier from source STUDY field (MAXIS-08)"
    },
    {
      "sdtm_variable": "DOMAIN",
      "label": "Domain Abbreviation",
      "type": "Char",
      "core": "Req",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Required domain abbreviation for Vital Signs"
    },
    {
      "sdtm_variable": "USUBJID",
      "label": "Unique Subject Identifier",
      "type": "Char",
      "core": "Req",
      "source_column": "PT",
      "transformation": "Concatenate STUDY, INVSITE, and PT",
      "transformation_type": "CONCAT",
      "controlled_terminology": null,
      "comments": "Unique subject identifier constructed from study, site, and patient number"
    },
    {
      "sdtm_variable": "VSSEQ",
      "label": "Sequence Number",
      "type": "Num",
      "core": "Req",
      "source_column": "",
      "transformation": null,
      "transformation_type": "SEQUENCE",
      "controlled_terminology": null,
      "comments": "Sequence number per subject ordered by date, time, and test code"
    },
    {
      "sdtm_variable": "VSTESTCD",
      "label": "Vital Signs Test Short Name",
      "type": "Num",
      "core": "Req",
      "source_column": "VTBPS2",
      "transformation": "Map to 'SYSBP' when VTBPS2 is not null",
      "transformation_type": "MAP",
      "controlled_terminology": "VSTESTCD",
      "comments": "Test short name mapped from source vital signs measurements. Multiple records per subject per timepoint for each vital sign type"
    },
    {
      "sdtm_variable": "VSTEST",
      "label": "Vital Signs Test Name",
      "type": "Char",
      "core": "Req",
      "source_column": "VTBPS2",
      "transformation": "Map to 'Systolic Blood Pressure' when VTBPS2 is not null",
      "transformation_type": "MAP",
      "controlled_terminology": "VSTEST",
      "comments": "Test name corresponding to VSTESTCD"
    },
    {
      "sdtm_variable": "VSORRES",
      "label": "Result or Finding in Original Units",
      "type": "Char",
      "core": "Exp",
      "source_column": "VTBPS2, VTBPD2, VTTP2, VTRRT2, VTPLS2, GNNUM1, GNNUM2, GNNUM3",
      "transformation": "Convert numeric to character",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Original result value as collected in source, converted to character"
    },
    {
      "sdtm_variable": "VSORRESU",
      "label": "Original Units",
      "type": "Num",
      "core": "Exp",
      "source_column": "",
      "transformation": null,
      "transformation_type": "MAP",
      "controlled_terminology": "UNIT",
      "comments": "Original units for vital signs measurements based on test type"
    },
    {
      "sdtm_variable": "VSSTRESC",
      "label": "Character Result/Finding in Std Format",
      "type": "Char",
      "core": "Exp",
      "source_column": "VTBPS2, VTBPD2, VTTP2, VTRRT2, VTPLS2, GNNUM1, GNNUM2, GNNUM3",
      "transformation": "Convert numeric to character, same as VSORRES",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Standardized character result, same as VSORRES for numeric vital signs"
    },
    {
      "sdtm_variable": "VSSTRESN",
      "label": "Numeric Result/Finding in Standard Units",
      "type": "Num",
      "core": "Exp",
      "source_column": "VTBPS2, VTBPD2, VTTP2, VTRRT2, VTPLS2, GNNUM1, GNNUM2, GNNUM3",
      "transformation": "Direct numeric mapping",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Numeric result value for vital signs"
    },
    {
      "sdtm_variable": "VSSTRESU",
      "label": "Standard Units",
      "type": "Char",
      "core": "Exp",
      "source_column": "",
      "transformation": null,
      "transformation_type": "MAP",
      "controlled_terminology": "UNIT",
      "comments": "Standard units same as original units for vital signs"
    },
    {
      "sdtm_variable": "VSBLFL",
      "label": "Baseline Flag",
      "type": "Char",
      "core": "Exp",
      "source_column": "CPEVENT",
      "transformation": "Set to 'Y' if CPEVENT='BASELINE', else null",
      "transformation_type": "DERIVE",
      "controlled_terminology": "NY",
      "comments": "Baseline flag derived from visit/event name"
    },
    {
      "sdtm_variable": "VISITNUM",
      "label": "Visit Number",
      "type": "Char",
      "core": "Exp",
      "source_column": "VISIT",
      "transformation": "Direct mapping",
      "transformation_type": "COPY",
      "controlled_terminology": null,
      "comments": "Visit number from source VISIT field"
    },
    {
      "sdtm_variable": "VISIT",
      "label": "Visit Name",
      "type": "Char",
      "core": "Exp",
      "source_column": "CPEVENT",
      "transformation": "Direct mapping",
      "transformation_type": "COPY",
      "controlled_terminology": null,
      "comments": "Visit name from CPEVENT (e.g., BASELINE, CYCLE 1 WEEK 1)"
    },
    {
      "sdtm_variable": "VSDTC",
      "label": "Date/Time of Measurements",
      "type": "Char",
      "core": "Exp",
      "source_column": "VTDT",
      "transformation": "Convert YYYYMMDD format to ISO 8601 YYYY-MM-DD",
      "transformation_type": "CONCAT",
      "controlled_terminology": null,
      "comments": "Date of vital signs measurement converted to ISO 8601 format"
    },
    {
      "sdtm_variable": "VSDTC",
      "label": "Date/Time of Measurements",
      "type": "Char",
      "core": "Exp",
      "source_column": "VTTM",
      "transformation": "Append time to date in ISO 8601 format if available",
      "transformation_type": "CONCAT",
      "controlled_terminology": null,
      "comments": "Date/time combined if time is available"
    },
    {
      "sdtm_variable": "VSSTAT",
      "label": "Completion Status",
      "type": "Char",
      "core": "Exp",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": "ND",
      "comments": "Completion status for vital signs not performed"
    },
    {
      "sdtm_variable": "VSTPT",
      "label": "Planned Time Point Name",
      "type": "Char",
      "core": "Perm",
      "source_column": "VTTMP",
      "transformation": "Map timing values",
      "transformation_type": "MAP",
      "controlled_terminology": null,
      "comments": "Planned time point name from source timing field"
    },
    {
      "sdtm_variable": "VSTPTNUM",
      "label": "Planned Time Point Number",
      "type": "Char",
      "core": "Perm",
      "source_column": "VTTMP",
      "transformation": "Assign numeric value to time points",
      "transformation_type": "ASSIGN",
      "controlled_terminology": null,
      "comments": "Numeric time point corresponding to VSTPT"
    },
    {
      "sdtm_variable": "VSPOS",
      "label": "Vital Signs Position of Subject",
      "type": "Char",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": "POSITION",
      "comments": "Position of subject during vital signs measurement - not available in source"
    },
    {
      "sdtm_variable": "VSCAT",
      "label": "Category for Vital Signs",
      "type": "Char",
      "core": "Perm",
      "source_column": "DCMNAME",
      "transformation": "Map to appropriate category",
      "transformation_type": "MAP",
      "controlled_terminology": null,
      "comments": "Category for vital signs from source data collection module name"
    },
    {
      "sdtm_variable": "VSSCAT",
      "label": "Subcategory for Vital Signs",
      "type": "Char",
      "core": "Perm",
      "source_column": "VTTMP",
      "transformation": "Map timing to subcategory",
      "transformation_type": "MAP",
      "controlled_terminology": null,
      "comments": "Subcategory for vital signs based on timing context"
    },
    {
      "sdtm_variable": "VSLOC",
      "label": "Location of Vital Signs Measurement",
      "type": "Char",
      "core": "Perm",
      "source_column": "INVSITE",
      "transformation": "Map to location if represents measurement location",
      "transformation_type": "MAP",
      "controlled_terminology": "LOC",
      "comments": "Location of measurement on body - not available in source"
    },
    {
      "sdtm_variable": "VSDY",
      "label": "Study Day of Vital Signs",
      "type": "Num",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Study day relative to reference start date from DM domain"
    },
    {
      "sdtm_variable": "EPOCH",
      "label": "Epoch",
      "type": "Char",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Trial epoch derived from visit context"
    },
    {
      "sdtm_variable": "VSDRVFL",
      "label": "Derived Flag",
      "type": "Char",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": "NY",
      "comments": "Derived flag - BSA is typically calculated from height and weight"
    },
    {
      "sdtm_variable": "VSSPID",
      "label": "Sponsor-Defined Identifier",
      "type": "Char",
      "core": "Perm",
      "source_column": "REPEATSN",
      "transformation": "Use as sponsor-defined identifier if needed",
      "transformation_type": "CONCAT",
      "controlled_terminology": null,
      "comments": "Sponsor-defined identifier combining repeat sequence and visit"
    }
  ],
  "derivation_rules": {
    "VSSEQ": "ROW_NUMBER() OVER (PARTITION BY USUBJID ORDER BY VSDTC)",
    "USUBJID": "STUDYID || '-' || SITEID || '-' || SUBJID",
    "DOMAIN": "'VS'",
    "VSSTRESC": "VSORRES converted to standard format",
    "VSSTRESN": "Numeric conversion of VSSTRESC where applicable",
    "VSBLFL": "'Y' for baseline records, null otherwise",
    "VSTESTCD": "CASE WHEN VTBPS2 IS NOT NULL THEN 'SYSBP' WHEN VTBPD2 IS NOT NULL THEN 'DIABP' WHEN VTTP2 IS NOT NULL THEN 'PULSE' WHEN VTTMP IS NOT NULL THEN 'TEMP' WHEN VTRRT2 IS NOT NULL THEN 'RESP' WHEN VTPLS2 IS NOT NULL THEN 'PULSE' WHEN GNNUM1 IS NOT NULL THEN 'WEIGHT' WHEN GNNUM2 IS NOT NULL THEN 'HEIGHT' WHEN GNNUM3 IS NOT NULL THEN 'BSA' END",
    "VSTEST": "CASE WHEN VTBPS2 IS NOT NULL THEN 'Systolic Blood Pressure' WHEN VTBPD2 IS NOT NULL THEN 'Diastolic Blood Pressure' WHEN VTTP2 IS NOT NULL THEN 'Pulse Rate' WHEN VTTMP IS NOT NULL THEN 'Temperature' WHEN VTRRT2 IS NOT NULL THEN 'Respiratory Rate' WHEN VTPLS2 IS NOT NULL THEN 'Pulse Rate' WHEN GNNUM1 IS NOT NULL THEN 'Weight' WHEN GNNUM2 IS NOT NULL THEN 'Height' WHEN GNNUM3 IS NOT NULL THEN 'Body Surface Area' END",
    "VSORRES": "CASE WHEN VSTESTCD='SYSBP' THEN CHAR(VTBPS2) WHEN VSTESTCD='DIABP' THEN CHAR(VTBPD2) WHEN VSTESTCD='PULSE' THEN COALESCE(CHAR(VTTP2), CHAR(VTPLS2)) WHEN VSTESTCD='RESP' THEN CHAR(VTRRT2) WHEN VSTESTCD='WEIGHT' THEN CHAR(GNNUM1) WHEN VSTESTCD='HEIGHT' THEN CHAR(GNNUM2) WHEN VSTESTCD='BSA' THEN CHAR(GNNUM3) END",
    "VSORRESU": "CASE WHEN VSTESTCD IN ('SYSBP','DIABP') THEN 'mmHg' WHEN VSTESTCD='PULSE' THEN 'beats/min' WHEN VSTESTCD='RESP' THEN 'breaths/min' WHEN VSTESTCD='WEIGHT' THEN 'kg' WHEN VSTESTCD='HEIGHT' THEN 'cm' WHEN VSTESTCD='BSA' THEN 'm\u00b2' END",
    "VSSTRESU": "CASE WHEN VSTESTCD IN ('SYSBP','DIABP') THEN 'mmHg' WHEN VSTESTCD='PULSE' THEN 'beats/min' WHEN VSTESTCD='RESP' THEN 'breaths/min' WHEN VSTESTCD='WEIGHT' THEN 'kg' WHEN VSTESTCD='HEIGHT' THEN 'cm' WHEN VSTESTCD='BSA' THEN 'm\u00b2' END",
    "VSDTC": "SUBSTR(CHAR(VTDT),1,4) || '-' || SUBSTR(CHAR(VTDT),5,2) || '-' || SUBSTR(CHAR(VTDT),7,2)",
    "VSSTAT": "CASE WHEN VSSTRESN IS NULL THEN 'NOT DONE' ELSE NULL END",
    "VSTPT": "CASE WHEN VTTMP='PRE-INFUSION' THEN 'PRE-INFUSION' WHEN VTTMP='DURING INFUSION' THEN 'DURING INFUSION' WHEN VTTMP='POST-INFUSION' THEN 'POST-INFUSION' WHEN VTTMP='BASELINE VITAL SIGNS' THEN 'BASELINE' ELSE VTTMP END",
    "VSTPTNUM": "CASE WHEN VTTMP='BASELINE VITAL SIGNS' THEN 0 WHEN VTTMP='PRE-INFUSION' THEN 1 WHEN VTTMP='DURING INFUSION' THEN 2 WHEN VTTMP='POST-INFUSION' THEN 3 ELSE NULL END",
    "VSPOS": "NULL (not available in source data, would typically be SITTING, STANDING, SUPINE)",
    "VSCAT": "CASE WHEN DCMNAME='VITALS' THEN 'VITAL SIGNS' ELSE DCMNAME END",
    "VSSCAT": "CASE WHEN VTTMP IN ('PRE-INFUSION','DURING INFUSION','POST-INFUSION') THEN 'INFUSION RELATED' WHEN VTTMP='BASELINE VITAL SIGNS' THEN 'BASELINE' ELSE NULL END",
    "VSLOC": "NULL (INVSITE represents investigator site, not measurement location)",
    "VSDY": "VSDTC - RFSTDTC + 1 (if VSDTC >= RFSTDTC) or VSDTC - RFSTDTC (if VSDTC < RFSTDTC)",
    "EPOCH": "CASE WHEN CPEVENT='BASELINE' THEN 'SCREENING' WHEN CPEVENT LIKE 'CYCLE%' THEN 'TREATMENT' WHEN VISIT=998 THEN 'FOLLOW-UP' ELSE 'TREATMENT' END",
    "VSDRVFL": "CASE WHEN VSTESTCD='BSA' THEN 'Y' ELSE NULL END",
    "VSSPID": "CHAR(REPEATSN) || '_' || CHAR(VISIT)"
  },
  "controlled_terminologies": {
    "VSPOS": [
      "SITTING",
      "STANDING",
      "SUPINE",
      "PRONE"
    ],
    "VSLOC": "STANDING, SITTING, SUPINE, PRONE"
  },
  "data_quality_rules": []
}