{
  "metadata": {
    "study_id": "MAXIS-08",
    "source_domain": "DEMO.csv",
    "target_domain": "DM",
    "sdtm_version": "SDTM-IG 3.4",
    "created_by": "SDTM Mapping Generator",
    "created_date": "2026-01-30T17:08:43.482711",
    "description": "Mapping specification for DM domain transformation"
  },
  "source_files": [
    {
      "filename": "DEMO.csv",
      "records": 16,
      "columns": 12
    }
  ],
  "variable_mappings": [
    {
      "sdtm_variable": "STUDYID",
      "label": "Study Identifier",
      "type": "Char",
      "core": "Req",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Study identifier from STUDY source column (MAXIS-08)"
    },
    {
      "sdtm_variable": "DOMAIN",
      "label": "Domain Abbreviation",
      "type": "Char",
      "core": "Req",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Required constant value for Demographics domain"
    },
    {
      "sdtm_variable": "USUBJID",
      "label": "Unique Subject Identifier",
      "type": "Char",
      "core": "Req",
      "source_column": "PT",
      "transformation": "Concatenate STUDY, SITEID, and SUBJID with hyphens",
      "transformation_type": "CONCAT",
      "controlled_terminology": null,
      "comments": "Unique subject identifier. PT contains 'SITEID-SUBJID' format. Example: MAXIS-08-01-01"
    },
    {
      "sdtm_variable": "SUBJID",
      "label": "Subject Identifier for the Study",
      "type": "Char",
      "core": "Req",
      "source_column": "PT",
      "transformation": "Extract subject ID from PT field",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Subject identifier within the study, extracted from second part of PT"
    },
    {
      "sdtm_variable": "SITEID",
      "label": "Study Site Identifier",
      "type": "Char",
      "core": "Exp",
      "source_column": "PT",
      "transformation": "Extract site ID from PT field",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Study site identifier, extracted from first part of PT"
    },
    {
      "sdtm_variable": "SEX",
      "label": "Sex",
      "type": "Char",
      "core": "Exp",
      "source_column": "GENDER",
      "transformation": "Direct mapping - already in correct format",
      "transformation_type": "COPY",
      "controlled_terminology": "SEX",
      "comments": "Sex of subject. Source GENDER contains 'M' or 'F' which aligns with CDISC SEX codelist (M, F, U, UNDIFFERENTIATED)"
    },
    {
      "sdtm_variable": "RACE",
      "label": "Race",
      "type": "Char",
      "core": "Exp",
      "source_column": "",
      "transformation": null,
      "transformation_type": "MAP",
      "controlled_terminology": "RACE",
      "comments": "Race mapping requires careful handling. HISPANIC in source should be considered for ETHNIC variable. Map to appropriate CDISC RACE terms"
    },
    {
      "sdtm_variable": "ETHNIC",
      "label": "Ethnicity",
      "type": "Char",
      "core": "Exp",
      "source_column": "RCE",
      "transformation": "Map source RCE values to CDISC ETHNIC codelist",
      "transformation_type": "MAP",
      "controlled_terminology": "ETHNIC",
      "comments": "Ethnicity derived from RCE. HISPANIC values should populate ETHNIC variable per CDISC standards"
    },
    {
      "sdtm_variable": "COUNTRY",
      "label": "Country",
      "type": "Char",
      "core": "Exp",
      "source_column": "INVSITE",
      "transformation": "Extract country code and map to ISO 3166 alpha-3",
      "transformation_type": "DERIVE",
      "controlled_terminology": "ISO 3166",
      "comments": "Country code derived from INVSITE. C008 likely represents a country identifier that needs mapping to 3-character ISO code"
    },
    {
      "sdtm_variable": "ARMCD",
      "label": "Planned Arm Code",
      "type": "Num",
      "core": "Exp",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Planned arm code - requires integration with randomization data or treatment assignment module"
    },
    {
      "sdtm_variable": "ARM",
      "label": "Description of Planned Arm",
      "type": "Char",
      "core": "Exp",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Description of planned arm - requires integration with randomization data or treatment assignment module"
    },
    {
      "sdtm_variable": "ACTARMCD",
      "label": "Actual Arm Code",
      "type": "Num",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Actual arm code - derived from treatment exposure records, not available in demographics source"
    },
    {
      "sdtm_variable": "ACTARM",
      "label": "Description of Actual Arm",
      "type": "Char",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Description of actual arm - derived from treatment exposure records"
    },
    {
      "sdtm_variable": "BRTHDTC",
      "label": "Date/Time of Birth",
      "type": "Char",
      "core": "Exp",
      "source_column": "DOB",
      "transformation": "Convert YYYYMMDD integer to ISO 8601 format YYYY-MM-DD",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Date of birth conversion. Source is integer YYYYMMDD format, convert to ISO 8601 string"
    },
    {
      "sdtm_variable": "AGE",
      "label": "Age",
      "type": "Char",
      "core": "Exp",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Age in years at reference start date. Requires RFSTDTC to be determined from first study activity"
    },
    {
      "sdtm_variable": "AGEU",
      "label": "Age Units",
      "type": "Char",
      "core": "Exp",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": "AGEU",
      "comments": "Age units - typically 'YEARS' for adult studies"
    },
    {
      "sdtm_variable": "RFSTDTC",
      "label": "Subject Reference Start Date/Time",
      "type": "Char",
      "core": "Req",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DATE_FORMAT",
      "controlled_terminology": null,
      "comments": "Subject reference start date - typically informed consent date or first study procedure. Requires integration with other domains"
    },
    {
      "sdtm_variable": "RFENDTC",
      "label": "Subject Reference End Date/Time",
      "type": "Char",
      "core": "Req",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DATE_FORMAT",
      "controlled_terminology": null,
      "comments": "Subject reference end date - last known contact or study participation end. Requires integration with disposition/completion data"
    },
    {
      "sdtm_variable": "RFXSTDTC",
      "label": "Date/Time of First Study Treatment",
      "type": "Char",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Date/time of first study treatment. Derived from EX domain EXSTDTC (start date of first exposure)"
    },
    {
      "sdtm_variable": "RFXENDTC",
      "label": "Date/Time of Last Study Treatment",
      "type": "Char",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Date/time of last study treatment. Derived from EX domain EXENDTC (end date of last exposure)"
    },
    {
      "sdtm_variable": "RFICDTC",
      "label": "Date/Time of Informed Consent",
      "type": "Char",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DATE_FORMAT",
      "controlled_terminology": null,
      "comments": "Date/time of informed consent - typically from separate informed consent form data"
    },
    {
      "sdtm_variable": "RFPENDTC",
      "label": "Date/Time of End of Participation",
      "type": "Char",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DATE_FORMAT",
      "controlled_terminology": null,
      "comments": "Date/time of end of participation - from disposition records or last contact"
    },
    {
      "sdtm_variable": "DTHDTC",
      "label": "Date/Time of Death",
      "type": "Char",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DATE_FORMAT",
      "controlled_terminology": null,
      "comments": "Date/time of death - only populate if subject died during study. Source from death report or AE domain"
    },
    {
      "sdtm_variable": "DTHFL",
      "label": "Subject Death Flag",
      "type": "Char",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": "NY",
      "comments": "Subject death flag - 'Y' if subject died, otherwise typically left null or 'N'"
    },
    {
      "sdtm_variable": "INVID",
      "label": "Investigator Identifier",
      "type": "Char",
      "core": "Perm",
      "source_column": "INVSITE",
      "transformation": "Extract investigator ID from INVSITE",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Investigator identifier - extracted from second part of INVSITE after underscore"
    },
    {
      "sdtm_variable": "INVNAM",
      "label": "Investigator Name",
      "type": "Char",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Investigator name - requires reference data linking investigator ID to name"
    },
    {
      "sdtm_variable": "DMSEQ",
      "label": "DMSEQ",
      "type": "Num",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Sequence number for DM domain - always 1 since there is only one record per subject in DM"
    },
    {
      "sdtm_variable": "DMDTC",
      "label": "Date/Time of Collection",
      "type": "Char",
      "core": "Perm",
      "source_column": "DOB",
      "transformation": "Use collection date from demographics form",
      "transformation_type": "DATE_FORMAT",
      "controlled_terminology": null,
      "comments": "Date/time of demographics collection - typically the baseline visit date"
    },
    {
      "sdtm_variable": "DMDY",
      "label": "Study Day of Collection",
      "type": "Num",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Study day of demographics collection relative to RFSTDTC. Positive for dates on/after RFSTDTC, negative before"
    }
  ],
  "derivation_rules": {
    "USUBJID": "STUDYID || '-' || SITEID || '-' || SUBJID",
    "AGE": "floor((RFSTDTC - BRTHDTC) / 365.25)",
    "DOMAIN": "'DM'",
    "AGEU": "'YEARS'",
    "STUDYID": "Use value from STUDY column",
    "SUBJID": "Extract characters after hyphen from PT (e.g., '01' from '01-01')",
    "SITEID": "Extract characters before hyphen from PT (e.g., '01' from '01-01')",
    "RACE": "Map RCE: 'BLACK' -> 'BLACK OR AFRICAN AMERICAN', 'ASIAN' -> 'ASIAN', 'HISPANIC' -> 'OTHER' (Hispanic is ethnicity not race)",
    "ETHNIC": "If RCE='HISPANIC' then 'HISPANIC OR LATINO', else 'NOT HISPANIC OR LATINO'",
    "COUNTRY": "Parse INVSITE 'C008_408' where C008 represents country. Map to ISO 3166-1 alpha-3 country code",
    "ARMCD": "Lookup from randomization/treatment assignment data (not available in demographics source)",
    "ARM": "Lookup from randomization/treatment assignment data (not available in demographics source)",
    "ACTARMCD": "Lookup from actual treatment received (EX domain or disposition data)",
    "ACTARM": "Lookup from actual treatment received (EX domain or disposition data)",
    "BRTHDTC": "Convert DOB from format 19740918 to '1974-09-18'",
    "RFSTDTC": "Minimum date from: informed consent date, first visit date, randomization date, or first treatment date across all domains",
    "RFENDTC": "Maximum date from: last visit date, study completion date, early termination date, or death date across all domains",
    "RFXSTDTC": "Minimum EXSTDTC from EX domain for the subject",
    "RFXENDTC": "Maximum EXENDTC from EX domain for the subject",
    "RFICDTC": "Informed consent date from ICF or screening module, converted to ISO 8601 format",
    "RFPENDTC": "Study participation end date from disposition (DS domain) or last study contact",
    "DTHDTC": "Death date from adverse events (AE domain), disposition (DS domain), or death form if DTHFL='Y'",
    "DTHFL": "If DTHDTC is populated then 'Y', else null or 'N' based on sponsor preference",
    "INVID": "Extract investigator identifier from INVSITE field (e.g., '408' from 'C008_408')",
    "INVNAM": "Look up investigator name based on INVID from site/investigator reference data",
    "DMSEQ": "Sequence number = 1 for DM domain (one record per subject)",
    "DMDTC": "Date of demographics data collection - can use visit date or baseline date associated with CPEVENT='BASELINE'",
    "DMDY": "If DMDTC >= RFSTDTC then (DMDTC - RFSTDTC) + 1, else (DMDTC - RFSTDTC)"
  },
  "controlled_terminologies": {
    "SEX": [
      "M",
      "F",
      "U",
      "UNDIFFERENTIATED"
    ],
    "RACE": [
      "AMERICAN INDIAN OR ALASKA NATIVE",
      "ASIAN",
      "BLACK OR AFRICAN AMERICAN",
      "NATIVE HAWAIIAN OR OTHER PACIFIC ISLANDER",
      "WHITE",
      "MULTIPLE",
      "NOT REPORTED",
      "UNKNOWN",
      "OTHER"
    ],
    "ETHNIC": [
      "HISPANIC OR LATINO",
      "NOT HISPANIC OR LATINO",
      "NOT REPORTED",
      "UNKNOWN"
    ],
    "AGEU": [
      "YEARS",
      "MONTHS",
      "WEEKS",
      "DAYS",
      "HOURS"
    ]
  },
  "data_quality_rules": []
}