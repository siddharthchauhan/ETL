{
  "metadata": {
    "study_id": "MAXIS-08",
    "source_domain": "DOSE.csv",
    "target_domain": "EX",
    "sdtm_version": "SDTM-IG 3.4",
    "created_by": "SDTM Mapping Generator",
    "created_date": "2026-02-02T09:34:44.935932",
    "description": "Mapping specification for EX domain transformation"
  },
  "source_files": [
    {
      "filename": "DOSE.csv",
      "records": 271,
      "columns": 21
    }
  ],
  "variable_mappings": [
    {
      "sdtm_variable": "STUDYID",
      "label": "Study Identifier",
      "type": "Char",
      "core": "Req",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Study identifier from source STUDY column"
    },
    {
      "sdtm_variable": "DOMAIN",
      "label": "Domain Abbreviation",
      "type": "Char",
      "core": "Req",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Required constant for Exposure domain"
    },
    {
      "sdtm_variable": "USUBJID",
      "label": "Unique Subject Identifier",
      "type": "Char",
      "core": "Req",
      "source_column": "",
      "transformation": null,
      "transformation_type": "CONCAT",
      "controlled_terminology": null,
      "comments": "Unique subject identifier derived from STUDY, INVSITE (site), and PT (subject ID)"
    },
    {
      "sdtm_variable": "EXSEQ",
      "label": "Sequence Number",
      "type": "Num",
      "core": "Req",
      "source_column": "",
      "transformation": null,
      "transformation_type": "SEQUENCE",
      "controlled_terminology": null,
      "comments": "Sequential exposure record number per subject, ordered by start date/time and repeat sequence"
    },
    {
      "sdtm_variable": "EXTRT",
      "label": "Name of Actual Treatment",
      "type": "Char",
      "core": "Req",
      "source_column": "DCMNAME",
      "transformation": "Map to actual treatment name based on study protocol",
      "transformation_type": "MAP",
      "controlled_terminology": null,
      "comments": "Name of actual treatment administered. DCMNAME indicates DOSING form. Use DSQS8 (COHORT B: Group B) to determine actual treatment name. May need reference to randomization data"
    },
    {
      "sdtm_variable": "EXDOSE",
      "label": "Dose per Administration",
      "type": "Char",
      "core": "Exp",
      "source_column": "DSQS5",
      "transformation": "Convert to numeric, handle nulls",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Dose per administration from DSQS5. Null values (47 records) indicate dose not administered or not recorded"
    },
    {
      "sdtm_variable": "EXDOSU",
      "label": "Dose Units",
      "type": "Char",
      "core": "Exp",
      "source_column": "",
      "transformation": null,
      "transformation_type": "ASSIGN",
      "controlled_terminology": "UNIT",
      "comments": "Dose units. Not in source data - must be derived from study protocol. MAXIS-08 appears to be oncology study; likely mg or mg/m2"
    },
    {
      "sdtm_variable": "EXDOSFRM",
      "label": "Dose Form",
      "type": "Char",
      "core": "Exp",
      "source_column": "",
      "transformation": null,
      "transformation_type": "MAP",
      "controlled_terminology": "FRM",
      "comments": "Dose form not explicitly in source. DSQS4 mentions 'MECHANICAL PUMP MALFUNCTION' suggesting IV infusion"
    },
    {
      "sdtm_variable": "EXDOSFRQ",
      "label": "Dosing Frequency per Interval",
      "type": "Char",
      "core": "Exp",
      "source_column": "",
      "transformation": null,
      "transformation_type": "MAP",
      "controlled_terminology": "FREQ",
      "comments": "Dosing frequency per interval. CPEVENT shows BASELINE, CYCLE 1-5 structure suggesting cyclical dosing. Determine from protocol"
    },
    {
      "sdtm_variable": "EXROUTE",
      "label": "Route of Administration",
      "type": "Char",
      "core": "Exp",
      "source_column": "",
      "transformation": null,
      "transformation_type": "MAP",
      "controlled_terminology": "ROUTE",
      "comments": "Route of administration. DSQS4 'MECHANICAL PUMP MALFUNCTION' suggests IV route. Confirm with protocol"
    },
    {
      "sdtm_variable": "EXSTDTC",
      "label": "Start Date/Time of Treatment",
      "type": "Char",
      "core": "Exp",
      "source_column": "DSDT1",
      "transformation": "Convert to ISO 8601 format YYYY-MM-DD or YYYY-MM-DDTHH:MM:SS",
      "transformation_type": "CONCAT",
      "controlled_terminology": null,
      "comments": "Start date/time of exposure. DSDT1 is date, DSTMS appears to be time in minutes. Convert DSTMS to HH:MM format (e.g., 1105 minutes = 18:25)"
    },
    {
      "sdtm_variable": "EXENDTC",
      "label": "End Date/Time of Treatment",
      "type": "Char",
      "core": "Exp",
      "source_column": "DSDT2",
      "transformation": "Convert to ISO 8601 format YYYY-MM-DD or YYYY-MM-DDTHH:MM:SS",
      "transformation_type": "CONCAT",
      "controlled_terminology": null,
      "comments": "End date/time of exposure. DSDT2 is end date, DSTME is end time. Convert to ISO 8601 format"
    },
    {
      "sdtm_variable": "EXSPID",
      "label": "Sponsor-Defined Identifier",
      "type": "Char",
      "core": "Perm",
      "source_column": "PT",
      "transformation": "Direct map",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Sponsor-defined identifier for the subject"
    },
    {
      "sdtm_variable": "EXCAT",
      "label": "Category of Treatment",
      "type": "Char",
      "core": "Perm",
      "source_column": "CPEVENT",
      "transformation": "Direct map or standardize",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Category for exposure. CPEVENT contains BASELINE, CYCLE 1-5 indicating treatment phase"
    },
    {
      "sdtm_variable": "EXSCAT",
      "label": "Subcategory of Treatment",
      "type": "Char",
      "core": "Perm",
      "source_column": "DSQS8",
      "transformation": "Direct map",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Subcategory for exposure showing cohort assignment (e.g., COHORT B: Group B)"
    },
    {
      "sdtm_variable": "EXADJ",
      "label": "Reason for Dose Adjustment",
      "type": "Char",
      "core": "Perm",
      "source_column": "DSQS4",
      "transformation": "Map reason codes to standardized text",
      "transformation_type": "MAP",
      "controlled_terminology": null,
      "comments": "Reason for dose adjustment. DSQS4 contains reasons like INTERRUPTED, DOSE REDUCED BY 1/2 DOSE. Only populated when DSQSNL1='OTHER'"
    },
    {
      "sdtm_variable": "EXDOSTXT",
      "label": "Dose Description",
      "type": "Char",
      "core": "Perm",
      "source_column": "DSQSNL1",
      "transformation": "Map to descriptive text",
      "transformation_type": "MAP",
      "controlled_terminology": null,
      "comments": "Dose description. DSQSNL1 has values like 'NOT REDUCED/INTERRUPTED', 'OTHER' indicating dose modification status"
    },
    {
      "sdtm_variable": "EXLOT",
      "label": "Lot Number",
      "type": "Char",
      "core": "Perm",
      "source_column": "DSQS7",
      "transformation": "Direct map",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Lot number of study drug administered (e.g., 00EMH161)"
    },
    {
      "sdtm_variable": "EPOCH",
      "label": "Epoch",
      "type": "Char",
      "core": "Perm",
      "source_column": "CPEVENT",
      "transformation": "Standardize epoch naming",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Trial epoch. Derived from CPEVENT which indicates study phase"
    },
    {
      "sdtm_variable": "EXSTDY",
      "label": "Study Day of Start of Treatment",
      "type": "Num",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DATE_FORMAT",
      "controlled_terminology": null,
      "comments": "Study day of exposure start. Calculate relative to reference start date (RFSTDTC) from DM domain. Days before reference start are negative"
    },
    {
      "sdtm_variable": "EXENDY",
      "label": "Study Day of End of Treatment",
      "type": "Num",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "DATE_FORMAT",
      "controlled_terminology": null,
      "comments": "Study day of exposure end. Calculate relative to reference start date (RFSTDTC) from DM domain"
    },
    {
      "sdtm_variable": "VISITNUM",
      "label": "Visit Number",
      "type": "Char",
      "core": "Perm",
      "source_column": "VISIT",
      "transformation": "Direct map",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Clinical encounter visit number (1 to 35 in source data)"
    },
    {
      "sdtm_variable": "VISIT",
      "label": "Visit Name",
      "type": "Char",
      "core": "Perm",
      "source_column": "CPEVENT",
      "transformation": "Direct map or standardize",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Visit name corresponding to VISITNUM. CPEVENT contains BASELINE, CYCLE 1, etc."
    },
    {
      "sdtm_variable": "EXOCCUR",
      "label": "EXOCCUR",
      "type": "Char",
      "core": "Perm",
      "source_column": "REPEATSN",
      "transformation": "Derive occurrence indicator",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Exposure occurrence flag. Set to 'Y' when dose was administered (DSQS5 has value), 'N' when planned but not given"
    },
    {
      "sdtm_variable": "SITEID",
      "label": "SITEID",
      "type": "Char",
      "core": "Perm",
      "source_column": "INVSITE",
      "transformation": "Extract site identifier",
      "transformation_type": "DERIVE",
      "controlled_terminology": null,
      "comments": "Study site identifier. INVSITE format appears to be site code (e.g., C008_408)"
    },
    {
      "sdtm_variable": "EXPRESP",
      "label": "EXPRESP",
      "type": "Char",
      "core": "Perm",
      "source_column": "QUALIFYV",
      "transformation": "Map qualifying visit indicator",
      "transformation_type": "MAP",
      "controlled_terminology": null,
      "comments": "Pre-specified response indicator. QUALIFYV appears to be a qualifying visit flag (1-4 range)"
    },
    {
      "sdtm_variable": "EXTIM",
      "label": "EXTIM",
      "type": "Char",
      "core": "Perm",
      "source_column": "DSTMS",
      "transformation": "Convert minutes to time format HH:MM",
      "transformation_type": "CONCAT",
      "controlled_terminology": null,
      "comments": "Exposure start time component. DSTMS appears to be time in minutes from midnight (945-1952 range = 15:45 to 32:32, suggesting 24hr+ infusions or next-day times)"
    },
    {
      "sdtm_variable": "EXETM",
      "label": "EXETM",
      "type": "Char",
      "core": "Perm",
      "source_column": "DSTME",
      "transformation": "Convert minutes to time format HH:MM",
      "transformation_type": "CONCAT",
      "controlled_terminology": null,
      "comments": "Exposure end time component. DSTME is end time in minutes from midnight"
    },
    {
      "sdtm_variable": "EXDOSRGM",
      "label": "Intended Dose Regimen",
      "type": "Char",
      "core": "Perm",
      "source_column": "",
      "transformation": null,
      "transformation_type": "CONCAT",
      "controlled_terminology": null,
      "comments": "Intended dose regimen text description combining all dosing parameters"
    },
    {
      "sdtm_variable": "SUPPEX.QVAL",
      "label": "SUPPEX.QVAL",
      "type": "Char",
      "core": "Perm",
      "source_column": "DSQSN10",
      "transformation": "Map to supplemental qualifier",
      "transformation_type": "MAP",
      "controlled_terminology": null,
      "comments": "Additional source variable DSQSN10 - store as supplemental qualifier if contains meaningful data"
    },
    {
      "sdtm_variable": "SUPPEX.QVAL",
      "label": "SUPPEX.QVAL",
      "type": "Char",
      "core": "Perm",
      "source_column": "DSQSN1",
      "transformation": "Map to supplemental qualifier",
      "transformation_type": "MAP",
      "controlled_terminology": null,
      "comments": "Additional source variable DSQSN1 - store as supplemental qualifier if contains meaningful data"
    },
    {
      "sdtm_variable": "SUPPEX.QVAL",
      "label": "SUPPEX.QVAL",
      "type": "Char",
      "core": "Perm",
      "source_column": "DSQSN11",
      "transformation": "Map to supplemental qualifier",
      "transformation_type": "MAP",
      "controlled_terminology": null,
      "comments": "Additional source variable DSQSN11 - store as supplemental qualifier if contains meaningful data"
    },
    {
      "sdtm_variable": "SUPPEX.QVAL",
      "label": "SUPPEX.QVAL",
      "type": "Char",
      "core": "Perm",
      "source_column": "SUBEVE",
      "transformation": "Map to supplemental qualifier",
      "transformation_type": "MAP",
      "controlled_terminology": null,
      "comments": "Sub-event indicator - may indicate event occurrence within visit. Store as supplemental data"
    }
  ],
  "derivation_rules": {
    "EXSEQ": "ROW_NUMBER() OVER (PARTITION BY USUBJID ORDER BY EXDTC)",
    "USUBJID": "STUDYID || '-' || SITEID || '-' || SUBJID",
    "DOMAIN": "'EX'",
    "EXSTDY": "EXSTDTC - RFSTDTC + 1 (if EXSTDTC >= RFSTDTC) else EXSTDTC - RFSTDTC",
    "STUDYID": "STUDY",
    "EXTRT": "Derive actual treatment name from DSQS8 (cohort assignment) and study arm allocation. If DSQS8 is null, use protocol-defined treatment for the subject's cohort",
    "EXDOSE": "DSQS5 (dose amount)",
    "EXDOSU": "Derive from protocol or CRF specification (likely 'mg' or 'mg/m2' based on oncology context)",
    "EXDOSFRM": "Derive dose form from study protocol (infusion pump mentioned in DSQS4 suggests 'INFUSION SOLUTION' or 'SOLUTION FOR INFUSION')",
    "EXDOSFRQ": "Derive from CPEVENT (cycle information) and protocol schedule. Likely 'QD' or protocol-specific frequency",
    "EXROUTE": "Likely 'INTRAVENOUS' based on mechanical pump reference and oncology study context",
    "EXSTDTC": "Combine DSDT1 (date) with DSTMS (time in minutes since midnight) to create ISO 8601 datetime: DSDT1 || 'T' || FORMAT_TIME(DSTMS)",
    "EXENDTC": "Combine DSDT2 (date) with DSTME (end time) to create ISO 8601 datetime: DSDT2 || 'T' || FORMAT_TIME(DSTME). If DSDT2 is null, use DSDT1 for same-day infusions",
    "EXSPID": "PT (Patient ID)",
    "EXCAT": "CPEVENT (treatment phase/cycle)",
    "EXSCAT": "DSQS8 (cohort assignment)",
    "EXADJ": "IF DSQSNL1 = 'OTHER' THEN DSQS4 ELSE NULL. Map values: 'INTERRUPTED' -> 'DOSE INTERRUPTED', 'DOSE REDUCED BY 1/2 DOSE' -> 'DOSE REDUCED', 'INTERRUPTED-MECHANICAL PUMP MALFUNCTION' -> 'DOSE INTERRUPTED DUE TO EQUIPMENT MALFUNCTION'",
    "EXDOSTXT": "DSQSNL1 status combined with DSQS4 details when applicable",
    "EXLOT": "DSQS7 (lot number)",
    "EPOCH": "Map CPEVENT to standard epochs: 'BASELINE' -> 'SCREENING', 'CYCLE 1' -> 'TREATMENT CYCLE 1', 'CYCLE 2' -> 'TREATMENT CYCLE 2', etc.",
    "EXENDY": "(EXENDTC_date - RFSTDTC_date) + 1 if EXENDTC >= RFSTDTC, else (EXENDTC_date - RFSTDTC_date)",
    "VISITNUM": "VISIT (visit number)",
    "VISIT": "CPEVENT (visit name/label)",
    "EXOCCUR": "IF DSQS5 IS NOT NULL THEN 'Y' ELSE 'N'",
    "SITEID": "INVSITE (investigator site ID)",
    "EXPRESP": "IF QUALIFYV = 1 THEN 'Y' ELSE NULL",
    "EXTIM": "FORMAT(FLOOR(DSTMS/60), '00') || ':' || FORMAT(MOD(DSTMS, 60), '00')",
    "EXETM": "FORMAT(FLOOR(DSTME/60), '00') || ':' || FORMAT(MOD(DSTME, 60), '00')",
    "EXDOSRGM": "Concatenate dosing parameters from protocol: EXDOSE || ' ' || EXDOSU || ' ' || EXDOSFRM || ' ' || EXDOSFRQ || ' ' || EXROUTE",
    "SUPPEX.QVAL": "Store DSQSN10 value in SUPPEX with QNAM='DSQSN10' for additional dosing information"
  },
  "controlled_terminologies": {},
  "data_quality_rules": []
}